from time import sleep
from Foundation.behaviours import *
import Foundation.basis as basis

portHandler = PortHandler(basis.DEVICENAME)
packetHandler = PacketHandler(basis.PROTOCOL_VERSION)
openPort(portHandler)
setBaudRate(portHandler, basis.BAUDRATE)

id_list = [i for i in range(1, 9)]
Robot = Lywal(id_list, portHandler, packetHandler)

# 初始化动作
Robot.switchTorque('enable')
Robot.rotateServo(initializeRotationDict())
Robot.setSpeed(100)
Robot.rotatePositionZero()

Robot.trot()
Robot.switchTorque('quit')

#
Robot.fourWheelDrive(0.4, [-1, -1, 1, 1])

Robot.setSpeed(80)
sleep(1)
Robot.rotateServo({2: 100, 4: 100, 7: 100, 8: 100})
sleep(1)
Robot.rotateServo({2: -100, 4: -100, 7: -100, 8: -100})
sleep(1)
Robot.rotateServo({2: 100, 4: 100, 7: 100, 8: 100})
sleep(1)
Robot.rotateServo({2: -100, 4: -100, 7: -100, 8: -100})
sleep(1)
Robot.setSpeed(92)
Robot.fourWheelDrive(0.4, [1, 1, -1, -1])

# 整个俯卧撑
sleep(0.3)
Robot.manipulateClaw(10, [1, 2, 3, 4])
sleep(0.3)
Robot.manipulateClaw(10, [1, 2, 3, 4])
sleep(0.3)
Robot.manipulateClaw(10, [1, 2, 3, 4])
sleep(0.3)
Robot.manipulateClaw(10, [1, 2, 3, 4])
sleep(0.3)
Robot.manipulateClaw(-10, [1, 2, 3, 4])
sleep(0.3)
Robot.manipulateClaw(-10, [1, 2, 3, 4])
Robot.manipulateClaw(20, [5, 6, 7, 8])
sleep(0.3)
Robot.manipulateClaw(-20, [1, 2, 3, 4])
Robot.manipulateClaw(20, [5, 6, 7, 8])
sleep(0.3)
Robot.manipulateClaw(20, [5, 6, 7, 8])
sleep(0.3)
Robot.manipulateClaw(-20, [5, 6, 7, 8])
sleep(0.3)
Robot.manipulateClaw(-20, [5, 6, 7, 8])
sleep(0.3)
Robot.manipulateClaw(-20, [5, 6, 7, 8])
sleep(0.3)

# 三足站立
Robot.setSpeed(92)
Robot.rotateGroup(-10, [3, 4])
sleep(0.3)
Robot.rotateGroup(60, [6, 8])
sleep(0.3)
Robot.rotateGroup(-20, [5, 7])
sleep(0.3)
Robot.manipulateClaw(40, [3, 4, 5, 7])
sleep(0.3)
Robot.manipulateClaw(30, [6, 8])
sleep(0.3)
Robot.manipulateClaw(50, [1, 2])
sleep(0.3)
Robot.manipulateClaw(20, [3, 4, 5, 7])
sleep(0.3)
Robot.manipulateClaw(20, [6, 8])
sleep(0.3)
Robot.manipulateClaw(20, [3, 4, 5, 7])
sleep(0.3)
Robot.manipulateClaw(-50, [1, 2])
sleep(0.5)

# 手动作
Robot.rotateGroup(-120, [1, 2])
sleep(0.2)
Robot.manipulateClaw(70, [1, 2])
sleep(0.2)
Robot.setSpeed(80)
Robot.rotateGroup(60, [1, 2])
sleep(0.2)
Robot.rotateGroup(-60, [1, 2])
sleep(0.2)
Robot.rotateGroup(60, [1, 2])
sleep(0.2)
Robot.rotateGroup(-60, [1, 2])
sleep(0.5)
Robot.setSpeed(92)
Robot.manipulateClaw(-70, [1, 2])
sleep(0.5)
Robot.rotateGroup(120, [1, 2])
sleep(0.5)
Robot.manipulateClaw(-50, [3, 4, 5, 7, 6, 8])
Robot.manipulateClaw(-30, [3, 4, 5, 7])

# 复位
Robot.rotatePositionZero()
sleep(0.5)

# 三足站立
Robot.setSpeed(92)
Robot.rotateGroup(-10, [1, 2])
sleep(0.3)
Robot.rotateGroup(60, [5, 7])
sleep(0.3)
Robot.rotateGroup(-20, [6, 8])
sleep(0.3)
Robot.manipulateClaw(40, [1, 2, 6, 8])
sleep(0.3)
Robot.manipulateClaw(30, [5, 7])
sleep(0.3)
Robot.manipulateClaw(50, [3, 4])
sleep(0.3)
Robot.manipulateClaw(20, [1, 2, 6, 8])
sleep(0.3)
Robot.manipulateClaw(20, [5, 7])
sleep(0.3)
Robot.manipulateClaw(20, [1, 2, 6, 8])
sleep(0.3)
Robot.manipulateClaw(-50, [3, 4])
sleep(0.5)

# 手动作
Robot.setSpeed(100)
Robot.rotateGroup(360, [3, 4])
sleep(0.5)
Robot.rotateGroup(-360, [3, 4])
Robot.setSpeed(90)
sleep(1)

# 复位
Robot.manipulateClaw(-80, [1, 2, 6, 8])
Robot.rotatePositionZero()
sleep(1)

# DUANG
Robot.fourWheelDrive(0.4, [-1, -1, 1, 1])
Robot.setSpeed(80)
sleep(1)
Robot.rotateServo({2: 100, 8: 100})
sleep(1)
Robot.rotateServo({2: -100, 8: -100})
sleep(1)
Robot.rotateServo({4: 100, 7: 100})
sleep(1)
Robot.rotateServo({4: -100, 7: -100})
sleep(1)
Robot.setSpeed(90)
Robot.fourWheelDrive(0.4, [1, 1, -1, -1])

# 坐
Robot.manipulateClaw(70, [1, 2, 3, 4])
sleep(1)
Robot.fourWheelDrive(0.1, [0, 0, 1, 1])
sleep(0.2)

Robot.fourWheelDrive(0.1, [0, 0, -1, -1])
sleep(0.2)
Robot.fourWheelDrive(0.1, [0, 0, 1, 1])
sleep(0.2)

Robot.fourWheelDrive(0.1, [0, 0, -1, -1])
sleep(1)
Robot.manipulateClaw(-70, [1, 2, 3, 4])
sleep(1)

# ???
Robot.manipulateClaw(80, [5, 6, 7, 8])
sleep(0.2)
Robot.rotateGroup(-40, [5, 6, 7, 8])
sleep(0.2)
Robot.manipulateClaw(80, [1, 2, 3, 4])
sleep(0.2)
Robot.rotateGroup(10, [1, 2, 3, 4])
sleep(0.2)

Robot.rotateGroup(-10, [1, 2, 3, 4])
sleep(0.2)

Robot.manipulateClaw(-80, [1, 2, 3, 4, 5, 6, 7, 8])
sleep(0.2)
Robot.rotatePositionZero()
Robot.switchTorque('disable')
Robot.switchTorque('enable')

sleep(1)

# 侧卧撑
Robot.manipulateClaw(40, [3, 4, 6, 8])
sleep(0.2)
Robot.manipulateClaw(40, [1, 2, 5, 7])
sleep(0.2)
Robot.manipulateClaw(-40, [3, 4, 6, 8])
sleep(0.2)
Robot.manipulateClaw(-40, [1, 2, 5, 7])
sleep(1)
Robot.manipulateClaw(40, [3, 4, 6, 8])
sleep(0.2)
Robot.manipulateClaw(40, [1, 2, 5, 7])
sleep(0.2)
Robot.manipulateClaw(-40, [3, 4, 6, 8])
sleep(0.1)

Robot.manipulateClaw(40, [3, 4, 6, 8])
sleep(0.1)

Robot.manipulateClaw(-40, [3, 4, 6, 8])
sleep(0.2)
Robot.manipulateClaw(-40, [1, 2, 5, 7])

Robot.switchTorque('disable')
Robot.switchTorque('enable')
sleep(2)

# 步行
Robot.trot(repetitive=18)
sleep(1)

Robot.fourWheelDrive(1, [-1, 1, -1, 1])
sleep(1)
Robot.switchTorque('disable')
Robot.switchTorque('enable')
sleep(1)

Robot.trot(repetitive=18)
sleep(1)
Robot.fourWheelDrive(1, [1, -1, 1, -1])

sleep(1)
Robot.fourWheelDrive(4, [-1, -1, -1, -1])

Robot.switchTorque('disable')
closePort(portHandler)
